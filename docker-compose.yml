version: '3'

services:
    database:
        image: 'postgres:latest'
        restart: always
        env_file:
            - .env
        ports:
            - '5432:5432'

    next:
        build: .
        ports:
            - 3000:3000
        environment:
            DATABASE_URL: 'postgresql://${POSTGRES_USER}:${POSTGRES_PASSWORD}@database:5432/${POSTGRES_DB}?schema=public'

        env_file:
            - .env
        depends_on:
            - database
